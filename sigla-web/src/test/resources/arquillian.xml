<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  ~ Copyright (C) 2019  Consiglio Nazionale delle Ricerche
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU Affero General Public License as
  ~     published by the Free Software Foundation, either version 3 of the
  ~     License, or (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU Affero General Public License for more details.
  ~
  ~     You should have received a copy of the GNU Affero General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
    <extension qualifier="selenium2">
        <property name="browserCapabilities">chrome</property>
    </extension>
    <extension qualifier="webdriver">
        <property name="browser">chrome</property>
        <property name="chromeArguments">
            --headless=new,
            --no-sandbox,
            --disable-gpu,
            --disable-dev-shm-usage,
            --disable-extensions,
            --disable-software-rasterizer,
            --window-size=1920,1080
        </property>
    </extension>
    <container qualifier="wildfly-bootable" default="true" >
        <configuration>
            <!-- Path al bootable JAR -->
            <property name="jarFile">target/sigla-bootable.jar</property>
            <property name="startupTimeoutInSeconds">180</property>
            <!-- JVM arguments -->
            <property name="javaVmArguments">
                -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8787
                -Xmx2g
                -Djava.security.egd=file:/dev/./urandom
                -Duser.language=it
                -Duser.country=IT
                -Djava.net.preferIPv4Stack=true
                -Dsigla.db.driver=h2
                -Dsigla.db.url=jdbc:h2:mem:sigladb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
                -Dsigla.db.user=sa
                -Dsigla.db.password=sa
                -Dspring.profiles.active=liquibase-test
                -Dliquibase.bootstrap.esercizio=2025
                -Dcors.allow-origin=http://localhost:9000
                "-Dquery.timestamp=SELECT '2025-10-25 00:00:00.000'"
                "-Dquery.date=SELECT DATE_TRUNC('DAY', '2025-10-25')"
            </property>
        </configuration>
    </container>
</arquillian>